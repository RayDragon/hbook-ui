{"version":3,"file":"auth.js","sources":["../../../projects/auth/src/lib/get-user-profile/get-user-profile.component.ts","../../../projects/auth/src/lib/get-user-profile/get-user-profile.component.html","../../../projects/auth/src/lib/auth.service.ts","../../../projects/auth/src/lib/auth.component.ts","../../../projects/auth/src/lib/login/login.component.ts","../../../projects/auth/src/lib/login/login.component.html","../../../projects/auth/src/lib/auth.module.ts","../../../projects/auth/src/public-api.ts","../../../projects/auth/src/auth.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-get-user-profile',\n  templateUrl: './get-user-profile.component.html',\n  styleUrls: ['./get-user-profile.component.scss']\n})\nexport class GetUserProfileComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<ion-app>\n  \n</ion-app>","import { Injectable } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport firebase from 'firebase';\nimport * as firebaseui from 'firebaseui';\nimport { BehaviorSubject } from 'rxjs';\nimport { GetUserProfileComponent } from './get-user-profile/get-user-profile.component';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthService {\n  firebaseApp!: firebase.app.App;\n  firebaseAuth!: firebase.auth.Auth;\n  fireAuthUI!: firebaseui.auth.AuthUI;\n  fireAuthUser!: firebase.User;\n  fireStoreDb!: firebase.firestore.Firestore;\n\n  $loginStatus = new BehaviorSubject<number>(0);\n  constructor(\n    private modalController: ModalController\n  ) {}\n  async init(config: any) {\n    this.firebaseApp = firebase.initializeApp(config);\n    const fireAuth = firebase.auth();\n    fireAuth.onAuthStateChanged(async (user)=>{\n      if(user) {\n        console.log('User is logged', user);\n        this.fireAuthUser = user;\n        this.fireStoreDb = firebase.firestore();\n        if(user.displayName == '' || user.displayName == null) {\n          let modal = await this.modalController.create({\n            component: GetUserProfileComponent,\n          });\n          await modal.present();\n          let data = await modal.onWillDismiss();\n          console.log(data);\n          \n        } else console.log(user.displayName);\n        this.$loginStatus.next(1);\n      } else {\n        console.log('user not logged');\n        this.$loginStatus.next(-1);\n      }\n    });\n    \n    this.firebaseAuth = fireAuth;\n    this.fireAuthUI = new firebaseui.auth.AuthUI(fireAuth);\n  }\n  async setUpAuth(div: string) {\n    this.fireAuthUI.start(div, {\n      signInOptions: [\n        {\n          provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,\n          defaultCountry: 'IN',\n          recaptchaParameters: {\n            type: 'image', // 'audio'\n            size: 'invisible', // 'invisible' or 'compact'\n            badge: 'bottomright' //' bottomright' or 'inline' applies to invisible.\n        },\n        }\n      ],\n      // signInFlow: 'popup',\n      callbacks:{\n        signInSuccessWithAuthResult: ()=>false\n      }\n    });\n  }\n  async logout() {\n    await this.firebaseAuth.signOut();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'auth-auth',\n  template: `\n    <p>\n      auth works!\n    </p>\n  `,\n  styles: [\n  ]\n})\nexport class AuthComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../auth.service';\n\n@Component({\n  selector: 'auth-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor(private AS: AuthService) {\n    \n  }\n\n  ngOnInit() {\n    this.AS.$loginStatus.subscribe(status=>{\n      if(status == -1) {\n        console.log(\"I was here\");\n        this.AS.setUpAuth('#fireAuthUiDiv');\n      }\n    });\n  }\n\n}\n","<div id=\"fireAuthUiDiv\"></div>","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { IonicModule } from '@ionic/angular';\nimport { AuthComponent } from './auth.component';\nimport { GetUserProfileComponent } from './get-user-profile/get-user-profile.component';\nimport { LoginComponent } from './login/login.component';\n\n\n\n@NgModule({\n  declarations: [AuthComponent, LoginComponent, GetUserProfileComponent],\n  imports: [\n    BrowserModule,\n    IonicModule,\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n  exports: [AuthComponent, LoginComponent]\n})\nexport class AuthModule { }\n","/*\n * Public API Surface of auth\n */\n\nexport * from './lib/auth.service';\nexport * from './lib/auth.component';\nexport * from './lib/auth.module';\nexport * from './lib/login/login.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}